extends layout

block content
    h1=title

    //p #{book_instances[1].status}
    //
    //each val, index in book_instances
    //    p #{val.status}

    form(method="post", action='')
        .form-group
            label(for="book") Book
            select#book.form-control(name="book", required="true")
                - book_list.sort((a,b) => { let nameA = a.title.toUpperCase(); let nameB = b.title.toUpperCase();
                - return (nameA < nameB) ? -1 : (nameA > nameB) ? 1:0; });
                for book in book_list
                    option(value=book._id, selected=(selected_book==book._id.toString() ? 'selected' : false)) #{book.title}

        .form-group
            label(for="imprint") Imprint
            input#imprint.form-control(type="text", placeholder="Publisher and date info", name="imprint", required="true", value=)
        .form-group
            label(for="due_back") Date when book available:
            input(id="due_back", type="date", name="due_back", value=)
        .form-group
            label(for="status") Status
            select#status.form-control(name="status", required="true")
                // for book_instance in book_instances
                each val, index in book_instances
                    option(value=val.status, selected=(val.status.toString() ? 'selected' : false)) #{val.status}
        .form-group
            button.btn.btn-primary(type="submit") Submit


    if errors
        ul
            for error in errors
                li!= error.msg